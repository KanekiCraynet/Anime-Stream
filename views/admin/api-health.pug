extends layout

block content
  div(class="space-y-6")
    div
      h2(class="text-xl font-semibold text-gray-900") Cek Koneksi API
      p(class="text-gray-600 mt-1") Verifikasi koneksi antara backend dan API eksternal.
    
    div(class="bg-white rounded-lg shadow p-6")
      div(class="flex items-center space-x-4")
        button(onclick="runHealthCheck()" class="bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700 transition-colors font-medium") Jalankan Tes
        div(id="healthStatus" class="text-sm text-gray-500") Klik tombol untuk memulai tes

    div(class="bg-white rounded-lg shadow p-6")
      h3(class="font-medium text-gray-900 mb-2") Hasil
      pre(id="healthResult" class="text-sm text-gray-800 bg-gray-50 p-3 rounded overflow-auto")

block scripts
  script.
    async function runHealthCheck(){
      const statusEl = document.getElementById('healthStatus');
      const resultEl = document.getElementById('healthResult');
      statusEl.textContent = 'Menguji...';
      statusEl.className = 'text-sm text-blue-600';
      resultEl.textContent = '';
      try {
        const res = await fetch('/admin/api-health/check');
        const data = await res.json();
        if (data.ok) {
          statusEl.textContent = 'Koneksi OK';
          statusEl.className = 'text-sm text-green-600';
        } else {
          statusEl.textContent = 'Koneksi gagal';
          statusEl.className = 'text-sm text-red-600';
        }
        resultEl.textContent = JSON.stringify(data, null, 2);
      } catch (e) {
        statusEl.textContent = 'Kesalahan: ' + e.message;
        statusEl.className = 'text-sm text-red-600';
      }
    }

